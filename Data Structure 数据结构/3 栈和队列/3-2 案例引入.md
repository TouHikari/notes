# 3.2 案例引入

- **案例 3.1：数制的转换**

  十进制数 $N$ 和其他 $d$ 进制数的转换是计算机实现计算的基本问题，其解决方法很多，其中一个简单算法基于下列原理：

  $$N = (N\ \ div\ \ d) × d + N\ mod\ d$$

  （其中， $div$ 为整除运算， $mod$ 为求余运算）

  > 例如： $(1348)_{10} = (2504)_8$ ，其运算过程如下：
  >
  > |   $N$  | $N\ div\ 8$ | $N\ mod\ 8$ |
  > |:------:|:-----------:|:-----------:|
  > | $1348$ |    $168$    |     $4$     |
  > |  $168$ |     $21$    |     $0$     |
  > |  $21$  |     $2$     |     $5$     |
  > |   $2$  |     $0$     |     $2$     |

  假设现要编制一个满足下列要求的程序：对于输入的任意一个非负十进制整数，输出与其等值的八进制数。上述计算过程是从低位到高位顺序产生八进制数的各个数位；而输出过程应从高位到低位进行，恰好和计算过程相反，因而我们可以使用栈来解决这个问题。在计算过程中依次将得到的余数压入栈中，计算完毕后，再依次弹出栈中的余数就是数制转换的结果。

<br>

- **案例 3.2：括号匹配的检验**

  假设表达式中允许包含两种括号：圆括号和方括号，其嵌套的顺序随意，即 `([ ]( ))` 或 `[([ ][ ])]` 等为正确的格式， `[( ]` 或 `([( ))` 或 `( )])` 均为不正确的格式。检验括号是否匹配的方法可用“期待的急迫程度”这个概念来描述。

  > 例如，考虑下列括号序列：
  > ```cpp
  > [ ( [ ] [ ] ) ]
  > 1 2 3 4 5 6 7 8
  > ```
  >
  > 当计算机接受了第一个括号后，它期待着与其匹配的第八个括号的出现，然而等来的却是第二个括号，显然第二个括号的期待急迫性高于第一个括号，此时第一个括号 `[` 只能暂时靠边，而迫切等待与第二个括号相匹配的、第七个括号 `)` 的出现。类似地，因等来的是第三个括号 `[` ，其期待匹配的程度较第二个括号更急迫，则第二个括号也只能靠边，让位于第三个括号。在接受了第四个括号之后，第三个括号的期待得到满足，消解之后，第二个括号的期待匹配就成为当前最急迫的任务了，……，依次类推。可见，这个处理过程恰与栈的特点相吻合。每读入一个括号，若是右括号，则或者使置于栈顶的最急迫的期待得以消解，或者是不合法的情况；若是左括号，则作为一个新的更急迫的期待压入栈中，自然使原有的在栈中的所有未消解的期待的急迫性都降了一级。

<br>

- **案例 3.3：表达式求值**

  表达式求值是程序设计语言编译中的一个最基本问题，其实现是栈应用的又一个典型例子。“算符优先法”，是一种简单直观、广为使用的表达式求值算法。

  要把一个表达式翻译成正确求值的一个机器指令序列，或者直接对表达式求值，首先要能够正确解释表达式。算符优先法就是根据算术四则运算规则确定的运算优先关系，实现对表达式的编译或解释执行的。

  在表达式计算中先出现的运算符不一定先运算，具体运算顺序是需要通过运算符优先关系的比较，确定合适的运算时机，而运算时机的确定是可以借助栈来完成的。将扫描到的不能进行运算的运算数和运算符先分别压入运算数栈和运算符栈中，在条件满足时再分别从栈中弹出进行运算。

**上述 3 个应用实例都是借助栈的后进先出的特性来处理问题的，在日常生活中，符合先进先出特性的应用更为常见。**

- **案例 3.4：舞伴问题**

  假设在周末舞会上，男士们和女士们进入舞厅时，各自排成一队。跳舞开始时，依次从男队和女队的队头各出一人配成舞伴。若两队初始人数不相同，则较长的那一队中未配对者等待下一轮舞曲。现要求写一算法模拟上述舞伴配对问题。

  先入队的男士或女士应先出队配成舞伴，因此该问题具有典型的先进先出特性，可用队列作为算法的数据结构。

  从上面的应用案例可以看出，不论是借助栈还是队列来解决问题，最基本的操作都是“入”和“出”。对于栈，在栈顶插入元素的操作称作“入栈”，删除栈顶元素的操作称作“出栈”；对于队列，在队尾插入元素的操作称作“入队”，在队头删除元素的操作称作“出队”。和线性表一样栈和队列的存储结构也包括顺序和链式两种。
